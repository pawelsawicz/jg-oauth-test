<html>
<head>
    <script src="https://identity.justgiving.com/js/connect.js"></script>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>    
    <script src="http://knockoutjs.com/downloads/knockout-3.3.0.js"></script>
</head>
<body>
    <iframe width="560" height="315" src="https://www.youtube.com/embed/5gvofiXHbUI" frameborder="0" allowfullscreen></iframe>

    <p>
        <a href="https://identity.sandbox.justgiving.com/connect/authorize?client_id=41cac7fc&response_type=id_token token&scope=openid account&redirect_uri=http%3A%2F%2Fv3-sandbox.justgiving.com%2F4w350m3%2Fdonation%2Fdirect%2Fcharity%2F2050%2F%3Famount%3D5.00%26exitUrl%3Dhttp%3A%2F%2Fjg-coldplay.azurewebsites.net%3FjgDonationId%3DJUSTGIVING-DONATION-ID%26currency%3DGBP%26reference%3Dcoldplay&nonce=ba3c9a58dff94a86aa633e71e6afc4e3">
            <img src="./donate-button.png" alt="Donate with JustGiving" />
        </a>

    <p>Name of user: <strong data-bind="text: displayName"></strong></p>
    <p>Email of user: <strong data-bind="text: email"></strong></p>
    <p>User Id: <strong data-bind="text: userId"></strong></p>

    <script>
        function AppViewModel() {
            var self = this;
            self.displayName = "";
            self.email = "";
            self.userId = "";
        }
        ko.applyBindings(new AppViewModel());
        JG.init({
            appId: '41cac7fc',
            environment: 'sandbox'
        });

        function SetOAuthInfo(displayName, email, userId) {
            var self = this;
            self.displayName = displayName;
            self.email = email;
            self.userId = userId;
        }

        $(document).ready(function () {
            JG.init({
                appId: '41cac7fc',
                environment: 'sandbox'
            });
            
            JG.checkConnected(function (status) {
                if (!status.connected) {
                    alert("asdasd");
                    //SetOAuthInfo("status.displayName", "status.email", "status.userId");
                    //var accessToken = status.accessToken;
                }
            });
        });
    </script>
</body>
</html>
