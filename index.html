<html>
<head>
  	<script src="https://identity.justgiving.com/js/connect.js"></script>
    <script src="http://knockoutjs.com/downloads/knockout-3.3.0.js"></script>
</head>
<body>
    <iframe width="560" height="315" src="https://www.youtube.com/embed/5gvofiXHbUI" frameborder="0" allowfullscreen></iframe>
    <h3 data-bind="text: name"></h3>
    <jg-login onlogin="handleLoginState" />

    <script>

        JG.init({
            appId: '61fbea6f',
            environment: 'sandbox'
        });

        var checkLoginState = function () {
            JG.checkConnected(function (status) {
                if (status.connected) {                 
                    var displayName = status.displayName;
                    var email = status.email;
                    var userId = status.userId;
                    var accessToken = status.accessToken;
                    window.location.href = 'http://v3-sandbox.justgiving.com/4w350m3/donation/direct/charity/2050/?amount=5.00&exitUrl=http://jg-coldplay.azurewebsites.net?jgDonationId=JUSTGIVING-DONATION-ID&currency=GBP&reference=coldplay';                    
                }
            });
        }

        function OAuthViewModel(){
        	var self = this;
        	self.name = "Test name"
        }

        ko.applyBindings(new OAuthViewModel());

    </script>
</body>
</html>
